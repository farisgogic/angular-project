
<h2>Select Road</h2>
<div class="container road-selection">
    <mat-select [(ngModel)]="selectedRoadId" (ngModelChange)="onRoadSelected()" class="mat-select">
        <mat-option *ngFor="let road of roads" [value]="road">{{ road }}</mat-option>
    </mat-select>

    <button mat-button (click)="openGoogleMaps()">
        <mat-icon class="mat-icon">map</mat-icon> Show All Info On Map For {{ this.selectedRoadId }}
    </button>
</div>
  
  <div *ngIf="roadworksLoaded">
    <h2>Roadworks</h2>
    <div *ngIf="roadworksData && roadworksData.length > 0; else noRoadworksData">
      <mat-paginator [pageSizeOptions]="[5, 10, 20]"></mat-paginator>
      <mat-table [dataSource]="dataSource" class="info-table">
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
        <mat-cell *matCellDef="let roadwork" class="title-and-subtitle">
          <span class="title">{{ roadwork.title }}</span>
          <span class="subtitle">{{ roadwork.subtitle }}</span>
        </mat-cell>           
      </ng-container>
      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
        <mat-cell *matCellDef="let roadwork">{{ roadwork.description.join(", ") }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="viewOnMap">
        <mat-header-cell *matHeaderCellDef>View on Map</mat-header-cell>
        <mat-cell *matCellDef="let roadwork">
          <ng-container *ngIf="roadwork.coordinate && roadwork.coordinate.lat && roadwork.coordinate.long">
            <button mat-icon-button (click)="openMap(roadwork.coordinate)">
              <mat-icon aria-label="View on Map">location_on</mat-icon>
            </button>
          </ng-container>
        </mat-cell>
      </ng-container>
      
        <mat-header-row *matHeaderRowDef="['title', 'description',  'viewOnMap']"></mat-header-row>
        <mat-row *matRowDef="let row; columns: ['title', 'description', 'viewOnMap']"></mat-row>
      </mat-table>
    </div>
    <ng-template #noRoadworksData>
      <div class="no-data-message">
        <p>No roadworks data available for {{ selectedRoadId }}.</p>
      </div>
    </ng-template>
  </div>
  
  <div *ngIf="webcamsLoaded">
    <h2>Webcams</h2>
    <div *ngIf="webcamsData && webcamsData.length > 0; else noWebcamsData">
      <mat-table [dataSource]="dataSourceWebCam" class="info-table">
      <ng-container matColumnDef="webcamName">
        <mat-header-cell *matHeaderCellDef>Webcam Name</mat-header-cell>
        <mat-cell *matCellDef="let webcam">{{ webcam.webcamName }}</mat-cell>
      </ng-container>
        <mat-header-row *matHeaderRowDef="['webcamName']"></mat-header-row>
        <mat-row *matRowDef="let row; columns: ['webcamName']"></mat-row>
      </mat-table>
    </div>
    <ng-template #noWebcamsData>
      <div class="no-data-message">
        <p>No webcams data available for {{ selectedRoadId }}.</p>
      </div>
    </ng-template>
  </div>
  
  <div *ngIf="restAreasLoaded">
    <h2>Rest Areas</h2>
    <div *ngIf="restAreasData && restAreasData.length > 0; else noRestAreasData">
      <mat-table [dataSource]="dataSourceRestArea" class="info-table">
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
        <mat-cell *matCellDef="let restArea" class="title-and-subtitle">
          <span class="title">{{ restArea.title }}</span>
          <span class="subtitle">{{ restArea.subtitle }}</span>
        </mat-cell>  
      </ng-container>
      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
        <mat-cell *matCellDef="let restArea">{{
          restArea.description.join(", ")
        }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="lat">
        <mat-header-cell *matHeaderCellDef>lat</mat-header-cell>
        <mat-cell *matCellDef="let restArea">{{ restArea.lat }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="viewOnMap" >
        <mat-header-cell *matHeaderCellDef >View on Map</mat-header-cell>
        <mat-cell *matCellDef="let restArea">
          <ng-container *ngIf="restArea.coordinate && restArea.coordinate.lat && restArea.coordinate.long">
            <button mat-icon-button (click)="openMap(restArea.coordinate)">
              <mat-icon aria-label="View on Map">location_on</mat-icon>
            </button>
          </ng-container>
        </mat-cell>
      </ng-container>
  
        <mat-header-row *matHeaderRowDef="['title', 'description',  'viewOnMap']"></mat-header-row>
        <mat-row *matRowDef="let row; columns: ['title', 'description', 'viewOnMap']"></mat-row>
      </mat-table>
    </div>
    <ng-template #noRestAreasData>
      <div class="no-data-message">
        <p>No rest areas data available for {{ selectedRoadId }}.</p>
      </div>
    </ng-template>
  </div>
  
  <div *ngIf="trafficReportsLoaded">
    <h2>Traffic reports</h2>
    <div *ngIf="trafficReportsData && trafficReportsData.length > 0; else noTrafficReportsData">
      <mat-table [dataSource]="dataSourceTrafficReports" class="info-table">
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
        <mat-cell *matCellDef="let trafficReport" class="title-and-subtitle">
          <span class="title">{{ trafficReport.title }}</span>
          <span class="subtitle">{{ trafficReport.subtitle }}</span>
        </mat-cell>  
      </ng-container>
      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
        <mat-cell *matCellDef="let trafficReport">{{
          trafficReport.description.join(", ")
        }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="viewOnMap" >
        <mat-header-cell *matHeaderCellDef >View on Map</mat-header-cell>
        <mat-cell *matCellDef="let trafficReport">
          <ng-container *ngIf="trafficReport.coordinate && trafficReport.coordinate.lat && trafficReport.coordinate.long">
            <button mat-icon-button (click)="openMap(trafficReport.coordinate)">
              <mat-icon aria-label="View on Map">location_on</mat-icon>
            </button>
          </ng-container>
        </mat-cell>
      </ng-container>
      
        <mat-header-row *matHeaderRowDef="['title', 'description',  'viewOnMap']"></mat-header-row>
        <mat-row *matRowDef="let row; columns: ['title', 'description', 'viewOnMap']"></mat-row>
      </mat-table>
    </div>
    <ng-template #noTrafficReportsData>
      <div class="no-data-message">
        <p>No traffic reports data available for {{ selectedRoadId }}.</p>
      </div>
    </ng-template>
  </div>

  <div *ngIf="closuresLoaded">
    <h2>Closure</h2>
    <div *ngIf="ClosuresData && ClosuresData.length > 0; else noClosuresData">
      <mat-table [dataSource]="dataSourceClosure" class="info-table">
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
        <mat-cell *matCellDef="let closure" class="title-and-subtitle">
          <span class="title">{{ closure.title }}</span>
          <span class="subtitle">{{ closure.subtitle }}</span>
        </mat-cell>  
      </ng-container>
      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
        <mat-cell *matCellDef="let closure">{{
          closure.description.join(", ")
        }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="viewOnMap" >
        <mat-header-cell *matHeaderCellDef >View on Map</mat-header-cell>
        <mat-cell *matCellDef="let closure" >
          <ng-container *ngIf="closure.coordinate && closure.coordinate.lat && closure.coordinate.long">
            <button mat-icon-button (click)="openMap(closure.coordinate)">
              <mat-icon aria-label="View on Map">location_on</mat-icon>
            </button>
          </ng-container>
        </mat-cell>
      </ng-container>
      
        <mat-header-row *matHeaderRowDef="['title', 'description',  'viewOnMap']"></mat-header-row>
        <mat-row *matRowDef="let row; columns: ['title', 'description', 'viewOnMap']"></mat-row>
      </mat-table>
    </div>
    <ng-template #noClosuresData>
      <div class="no-data-message">
        <p>No closures data available for {{ selectedRoadId }}.</p>
      </div>
    </ng-template>
  </div>
  
  <div *ngIf="chargingStationsLoaded">
    <h2>Charging Stations</h2>
    <div *ngIf="chargingStationsData && chargingStationsData.length > 0; else noChargingStationsData">
      <mat-table [dataSource]="dataSourceChargingStations" class="info-table">
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
        <mat-cell *matCellDef="let chargingStation" class="title-and-subtitle">
          <span class="title">{{ chargingStation.title }}</span>
          <span class="subtitle">{{ chargingStation.subtitle }}</span>
        </mat-cell>  
      </ng-container>
      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
        <mat-cell *matCellDef="let chargingStation">{{
          chargingStation.description.join(", ")
        }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="viewOnMap" >
        <mat-header-cell *matHeaderCellDef >View on Map</mat-header-cell>
        <mat-cell *matCellDef="let chargingStation">
          <ng-container *ngIf="chargingStation.coordinate && chargingStation.coordinate.lat && chargingStation.coordinate.long">
            <button mat-icon-button (click)="openMap(chargingStation.coordinate)">
              <mat-icon aria-label="View on Map">location_on</mat-icon>
            </button>
          </ng-container>
        </mat-cell>
      </ng-container>
  
        <mat-header-row *matHeaderRowDef="['title', 'description',  'viewOnMap']"></mat-header-row>
        <mat-row *matRowDef="let row; columns: ['title', 'description', 'viewOnMap']"></mat-row>
      </mat-table>
    </div>
    <ng-template #noChargingStationsData>
      <div class="no-data-message">
        <p>No charging stations data available for {{ selectedRoadId }}.</p>
      </div>
    </ng-template>
  </div>